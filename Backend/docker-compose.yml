version: '3.8'

services:
  bus-aggregator-backend:
    build: .
    container_name: bus_scraper_backend
    ports:
      - "5000:5000" # Maps local port 5000 to container port 5000
    environment:
      - PORT=5000
      - NODE_ENV=development
    # Critical for Playwright/Chromium in Docker
    ipc: host 
    security_opt:
      - seccomp:unconfined # Helps with browser sandboxing issues
    volumes:
      - .:/app
      - /app/node_modules # Prevents local node_modules from overwriting container ones
    restart: unless-stopped